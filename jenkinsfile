pipeline {

  agent {
    node {
        label 'aws-jenkins-slave'
    }
  }
  
  options {
	buildDiscarder(logRotator(numToKeepStr: '2', artifactNumToKeepStr: '2'))
	timestamps()
  }
  
  stages {
    stage('Test') {
      steps {
	sh 'gradle clean build'
      }
    }
    stage('Report') {
      steps {
          echo '---------------'
	 
     }
    }
  }

  post {
    success {
	sh 'scp /home/jenkins/workspace/1steps/build/reports/tests/test/* ubuntu@172.31.44.190:/var/www/testgradle_report/'
    }
  }
 
}

