pipeline {

  agent {
    node {
        label 'aws-jenkins-slave'
    }
  }
  
  options {
	buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '10'))
	timestamps()
  }
  
  stages {
    stage('Test') {
      steps {
	sh 'gradle clean build'
      }
    }
    stage('Report') {
      steps {
          echo '---------------'
     }
    }
  }

  post {
    always {
       	sh 'cd /home/jenkins/workspace/1steps'
	sh 'scp -r * ubuntu@172.31.44.190:/var/www/testgradle_report/'
    }
  }
  
}

